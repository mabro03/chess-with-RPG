# 👑 Project: chess-with-RPG (체스 RPG)

## 📌 프로젝트 상태

![Python](https://img.shields.io/badge/Python-3.x-blue?logo=python) 
![Pygame](https://img.shields.io/badge/Pygame-2.x-green?logo=python) 
![License](https://img.shields.io/badge/License-MIT-yellow.svg) 
![Status](https://img.shields.io/badge/Status-Completed-brightgreen)

> 전통적인 체스에 **HP, AP, 특수 능력, 쿨타임** 등 RPG 요소를 도입하여 전략의 깊이와 변수를 극대화한 턴제 전략 게임입니다.

<img width="1151" height="932" alt="Image" src="https://github.com/user-attachments/assets/cff13619-1204-41d5-b8b8-a64975aeed23" />


---

## 📜 목차 (Table of Contents)

1.  [구현된 핵심 시스템](#2-구현된-핵심-시스템)
2.  [실행 방법 및 데모](#3-실행-방법-및-데모)
3.  [라이센스 및 참고 자료](#4-라이센스-및-참고-자료)

---

## 2. 구현된 핵심 시스템

### 2.1. 기본적인 체스 메커니즘

* **규칙 구현**
    * **표준 이동 규칙:** 킹, 퀸, 룩, 비숍, 나이트, 폰의 표준적인 이동 및 공격 규칙을 모두 구현했습니다.
    * **승리 규칙 변경:** 기존 체스의 체크메이트 판정 로직은 구현하지 않고, **킹의 HP가 0이 될 경우 승리**하는 새로운 규칙으로 대체하여 기존 체스 게임의 구조를 재설정하였습니다.
* **게임 구조:**
    * **턴제 시스템:** 플레이어(백색)와 AI(흑색)가 번갈아 가며 턴을 진행하는 기본적인 턴제 구조를 구현했습니다.
    * **보드:** $8 \times 8$ 표준 체스 보드를 Pygame의 Grid 시스템을 이용하여 구현하고, 각 기물의 위치를 좌표계로 관리합니다.
* **코드 구현**
    * **표준 이동 규칙:** Piece.get_valid_moves(board) 함수를 통해 각 기물 클래스에 표준 체스 이동 규칙을 계산하는 메서드를 오버라이드하여 구현하였습니다.
    * **보드 및 좌표계:** Board.grid_to_coord(row,col) 함수와 Board.board_state 함수를 통해 8*8 보드 상태를 2차원배열로 관리하고, Pygame의 픽 좌표와 체스 격자 좌표를 변환하는 로직을 구현하였습니다.
    * **턴제 시스템:** Game.change_turn() 함수를 통해 턴이 바뀔 때마다 플레이러와 AI의 상태를 전환하고, 쿨타임 감소 및 킹의 회복 등 턴 종료 이벤트를 일괄 처리하도록 설계하였습니다.

### 2.2. 스탯 및 전투 시스템 (창의성/난이도 강조)

* **스탯 정의:** 모든 기물에 체력(HP)과 공격력(AP) 스탯을 부여했습니다.

| 기물 | 체력 (HP) | 공격력 (AP) |
| :--- | :--- | :--- |
| 킹 (King) | 20 | 5 |
| 퀸 (Queen) | 15 | 9 |
| 룩 (Rook) | 12 | 7 |
| 비숍 (Bishop) | 10 | 6 |
| 나이트 (Knight) | 9 | 6 |
| 폰 (Pawn) | 5 | 3 |

* **전투 메커니즘:** 기물이 상대방 기물의 위치로 이동할 때 전투가 일어나며, **데미지 계산의 복잡도를 낮추고자** 방어력 대신 **일시적인 추가 체력(데미지 감소)**으로 방어도를 고려하였습니다.
* **기물 제거 조건:** 일반 체스와 다르게, 기물의 **체력(HP)이 0 이하**가 되어야만 보드에서 제거됩니다.
* **승리 조건:** **상대방 킹의 HP를 0으로 만들어야 승리**합니다.

* **코드 구현**
    * **스탯 부여:** init 메서드 내 self.hp, self.ap 정의를 통해 모든 Piece 객체 생성 시 고유한  체력과 공격력 스탯을 부여하여 객체 지향적으로 RPG 요소를 구현하였습니다.
    * **전투 발동:** Game.handle_move() 함수를 통해기물이곡격 대상 칸으로 이동시, 일반적인 capture 대신 bottle_system.initiate_battle() 함수를 호출하여 체스 이동과 RPG 전투를 통합하였습니다.
    * **데미지 계산:** battle_system.calculate_damage() 함수를 통해 공격자의 공격력과 방어자의 추가 체력을 고려하여 마지막 데미지를 계산하는 핵심 전투 로직을 구현하였습니다. 
    * **기물 제거:** Piece.take_damage() 함수와 Board.remove_piece() 함수를 통해 현 체력을 확인하고 제거 매커니즘이 작동하도록 구현하엿습니다.

### 2.3. 체스의 기물별 특수 능력과 메커니즘

| 기물 | 특수 능력 및 메커니즘 | 구현 내용 강조 |
| :--- | :--- | :--- |
| **킹 (King)** | **자동 회복:** 매 턴 시작 시 체력을 $\text{4}$만큼 회복합니다. | 턴 변경 시 상태 업데이트 |
| **퀸 (Queen)** | **관통 공격:** 공격 대상 기물을 타격한 뒤, 해당 기물의 뒤쪽에 위치한 다음 기물까지 타격합니다. | **3턴 쿨타임 시스템** 적용 |
| **룩 (Rook)** | **전선 방어:** 이동을 마칠 경우, 다음 턴까지 $\text{3}$만큼의 임시 체력 (데미지 감소)을 스스로에게 부여합니다. | 턴 시작/종료 시 버프 적용 및 해제 |
| **비숍 (Bishop)** | **광역 치유:** 이동을 마친 칸을 기준으로 주변 $3 \times 3$ 범위의 아군 기물에게 체력 $\text{3}$을 회복시킵니다. | 주변 칸 탐색 및 상태 업데이트 |
| **나이트 (Knight)** | **도약 공격:** (기존 특성 유지) 앞에 기물이 있어도 넘어서 공격이 가능합니다. | 기존 특성의 강력함 유지 |
| **폰 (Pawn)** | **선제 공격:** 게임 시작 후 **첫 공격**을 할 때 $\text{1}$의 추가 공격력을 얻습니다. | 최초 공격 플래그 관리 |

* **코드 구현**
    * **킹:** 
    * **퀸:** Queen.special_attack(board) 함수와 Queen.cool_down 함수를 통해 공격 후 직선 경로를 탐색하여 2차 타겟을 찾는 복잡한 로직과 3턴 쿨타임 상태 관리를 구현하였습니다.
    * **룩:** Rook.apply_defense_buff() 함수와 Rook.remove_buff() 함수를 통해 이동 후 임시 $\text{HP}$ (방어 버프)를 부여하고, Game.change_turn() 시점에 버프를 제거하는 상태 유지/제거 로직 구현하였습니다.
    * **비숍:** Bishop.heal_adjacent_allies(board ) 함수를 통해 이동 후 주변 $3 \times 3$ 그리드를 반복문으로 탐색하여 아군을 식별하고 $\text{HP}$를 회복시키는 광역 효과 로직 구현하였습니다.
    * **나이트:** 다른 코드 구현은 없습니다. 앞의 기물의 무시하고 움직이는 것 자체가 특수 능력으로 간주 하였습니다. 
    * **폰:** Pawn.first_attack 플래그 관리를 통해 폰 객체 내에 True/False 플래그를 두어, 최초 공격 시에만 $\text{AP}$에 보너스 $\text{1}$을 적용하는 일회성 버프 로직 구현하습니다.

### 2.4. AI 구현 방식

* **알고리즘:** **간소화된 미니맥스(Minimax) 알고리즘** 기반의 턴제 AI를 구현하였습니다.
* **평가 함수 수정:** AI는 단순 기물 교환 가치뿐만 아닌, **현재 기물의 체력(HP)과 공격력(AP)**을 고려하여 가장 유리한 이동을 선택하도록 평가 함수를 수정 및 적용하였습니다.
    * **Minimax  수정 방법**
         * **기물 가치에 체력과 공격력 반영:** 수정 전에는 평가를 할 때 백색 기물들의 기물 가치의 합에서 흑색 기물들의 기물 가치의 합을 빼서 구현혔지만 Chess with RPG에서는 기물의 가치에 기물의 체력이 낮을 수록 가치를 낮게 평가하여 약해진 기물을 보호하거나 약해진 아군 기물을 먼저 제거하도록 유도하며, 추가적으로 공격력이 높은 기물들의 공격 기회를 더 높게 평가하게 하였습니다.
         *  **특수 능력 및 쿨타임 반영:** 각 기물 별로 특수 능력의 활성화 여부를 평가에 포함했습니다.
              * 치유: 비숍의 유효 이동 경로 중, 주변 아군의 체력을 가장 많이 회복시킬 수 있는 칸으로의 이동을 높은 점수로 평가합니다.
              * 쿨타임: 퀸의 특구 능력이 쿨타임 상태가 아닐 때, 관통 공격이 가능한 경오를 발견하면 일반 공격 경로보다 훨씬 높은 점수를 부여합니다.
              * 방어: 룩이 일시적인 체력을 얻을 수 있는 칸으로 이동하는 것을 방어 전략으로 보고 가산점을 부여합니다.

*이러한 수정을 통해 단순한 기물잡기가 아닌 체력을 관리하고 특수 능력을 활용하는 전략적 RPG 전투 게임이 가능합니다.*

* **코드 구현**
    * **AI 의사 결정:** AI.get_best_move(board) 함수를 통해	미니맥스 알고리즘을 활용하여 다음 수를 탐색하도록 구현하였습니다.
    * **평가 함수:** AI.evaluate_board(board) 함수를 통해 전통적인 기물 가치(예: 퀸=9, 룩=5) 외에 기물의 현재 $\text{HP}$와 $\text{AP}$를 가산하여, RPG 요소가 반영된 AI 의사 결정이 이루어지도록 평가 함수를 수정 및 최적화하였습니다.

---

## 3. 실행 방법 및 데모

### 3.1. 환경 설정
* **Python 필요 버전:** 프로젝트는 Python 3.x 환경에서 개발되었습니다.
* **필수 라이브러리:** 본 프로젝트는 **Pygame** 라이브러리를 사용합니다.
    ```bash
    pip install pygame
    ```

### 3.2. 실행 방법
1.  **파일 준비:** 업로드된 ZIP 파일을 해제한 후, 소스 파일이 포함된 최상위 디렉토리로 이동합니다.
2.  **실행 명령어:** 터미널에서 다음 명령어를 입력하여 게임을 실행합니다.
    ```bash
    python chess_source_code.py
    ```

### 3.3. 프로젝트 스크린샷

**[초기 화면]** 
<img width="1151" height="932" alt="Image" src="https://github.com/user-attachments/assets/cff13619-1204-41d5-b8b8-a64975aeed23" />


**[게임 플레이 화면]** (각 기물의 아래에 있는 초록색 숫자는 체력, 빨간색은 공격력을 뜻합니다.)
<img width="1146" height="937" alt="Image" src="https://github.com/user-attachments/assets/04da4a88-99ff-41cb-b108-a41e52a47f88" />

---

## 4. 라이센스 및 참고 자료

### 4.1. 프로젝트 라이센스
본 프로젝트는 **[MIT License](https://opensource.org/licenses/MIT)**를 따릅니다.

### 4.2. 참고 자료 및 소스
1.  **체스 기물 이미지:**
    * **참고 자료:** [Lichess/Wikipedia]의 표준 체스 기물 세트 파일을 참조하여 사용했습니다.
2.  **Pygame 라이브러리 및 구조:**
    * **참고 자료:** Python의 **Pygame 공식 문서** 및 튜토리얼을 참고하여 기본적인 게임 루프, 이벤트 처리, 이미지 로드 및 출력 등의 구조를 구현했습니다.
3.  **AI 로직 및 알고리즘:**
    * **참고 자료:** 미니맥스(Minimax) 알고리즘의 기본적인 개념과 체스 인공지능(Chess AI)의 평가 함수 구조를 참고하여, 프로젝트의 스탯(체력, 공격력)에 맞춰 간소화하여 재설계 및 구현했습니다.

* **코드 작성 주체:** 위 명시된 구조 및 자료 참고를 제외한 **모든 RPG 요소(스탯, 특수 능력 로직, 전투 시스템)**는 **본인이 직접 작성**하였습니다.
